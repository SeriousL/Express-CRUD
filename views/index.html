<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Hero - Admin</title>
  <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.css">
  <style>
    .hero-list img {
      width: 50px;
    }
  </style>
</head>

<body>
  <header>
    <div class="page-header container">
      <h1><a href="/">王者荣耀</a> <small>英雄管理器</small></h1>
    </div>
  </header>
  <div class="container hero-list">
    <a class="btn btn-success pull-right" href="/add">添加英雄</a>
    <table class="table table-hover">
      <thead>
        <th>编号</th>
        <th>名称</th>
        <th>性别</th>
        <th>头像</th>
        <th>操作</th>
      </thead>
      <tbody>
        {{ each heros }}
        <tr>
          <td>{{ $value.id }}</td>
          <td>{{ $value.name }}</td>
          <td>{{ $value.gender }}</td>
          <td><img src="{{ $value.avatar }}" alt=""></td>
          <td>
            <a href="/info?id={{ $value.id }}">查看</a>
            <a href="/edit?id={{ $value.id }}">编辑</a>
            <a href="/delete?id={{ $value.id }}" class="delete">删除</a>
          </td>
        </tr>
        {{ /each }}
      </tbody>
    </table>
  </div>
  <script src="/node_modules/jquery/dist/jquery.js"></script>
  <script src="/node_modules/bootstrap/dist/js/bootstrap.js"></script>
</body>
<script>
  $('.delete').on('click', function (e) {
    // console.log(1);
    e.preventDefault();
    if (window.confirm('are you ok？')) {
        $.ajax({
          url: $(this).attr('href'),
          type: 'get',
          dataType: 'json',
          success: function (data) {
            if (data.err_code === 0) {
              // 让当前页重新刷新，这样页面重新渲染，你删除的那个数据就不存在了
              location.href = '/';
            }
          }
        })
      }
  })
</script>

</html>